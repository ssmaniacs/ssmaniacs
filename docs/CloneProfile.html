<!DOCTYPE html>
<html>
  <head>
    <title>Clone Secret Society Profile</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
  </head>
  <body>
    <h1>SS進行データ複製</h1>
    <p>旧端末のSSアカウントから新端末のSSアカウントへ<strong>友達以外の</strong>ゲーム進行データを複製します。<br>
      データの「移行」ではなく「複製」ですので、複製完了時点で旧端末と新端末は「たまたま名前やレベル、持ち物などが同じなだけの別人」
      となります。複製後、それぞれの端末で独立してプレイを続行することができます。
      友達を引き継げないのは新旧端末のアカウントが実質的に「別人」であるためです。

    <h2>0.条件の確認</h2>
    <ul>
      <li>進行データの複製はSSサーバを介して行ないます。以下の手順は全て新旧両方の端末がインターネットに接続できる状態で実施してください。</li>
      <li>新端末では進行データの削除またはゲーム本体のアンインストール・再インストールを行ないます。機能制限されていないかどうか確認しておいてください。</li>
      <li>複製に失敗した場合、最悪の場合は新端末のゲームが最初からやり直しになります（旧端末には影響ありません）。
        新端末のゲームがある程度進んでしまっている人は後悔しないようによく考えて。</li>
      <li>Android, iOS, Mac および Windows の間での成功実績がありますが、
        異なる種類のデバイス間での複製ではまだまだ予想外の問題が発生する可能性があります。
        AT YOUR OWN RISKでご利用ください。</li>
    </ul>
    <h2>1.新端末の準備</h2>
    <ol>
      <li>新端末にゲームをインストールして、起動します。</li>
      <li>プレーヤー名を入力、少なくとも初期チュートリアルの終わりまでプレイします
        （仏像広場を１回プレイして骨董のコインをゲットするまで）。それより先に進んでいてもOKです。</li>
      <li>ゲームを終了します。</li>
      <li>ゲーム進行データを削除、またはゲーム本体を一旦アンインストールしてから再インストールします。<br>
        ※ゲーム本体をアンインストールせずに進行データのみを削除する方法は<a href='#initgame'>こちら</a>。</li>
      <li>ゲームを起動します。</li>
      <li>「新しいセッションが始まりましたが、以前にこのデバイスで当ゲームをプレイしたことがあるようです。
        以前の経過を取り戻して**レベルから続けますか?」
        というメッセージが表示されてデータ削除／アンインストール直前の状態からゲームが続行できることを確認します。
        前記メッセージが表示されずに直接プレーヤー名入力画面になってしまった場合は、
        残念ながらこのサイトでは進行データの複製ができません。</li>
      <li>友達招待コードを取得、メモしておきます（「友達」→「サービス」→「招待コード」）。</li>
      <li>現時点でのレベル、職業、名前をメモしておきます（確認用）。</li>
      <li>もう一度ゲームを終了、進行データの削除またはゲーム本体のアンインストール・再インストールを行ないます。<br>
        ※ゲーム本体をアンインストールせずに進行データのみを削除する方法は<a href='#initgame'>こちら</a>。<br>
        <font color='red'>※これ以降、進行データの複製が終わるまで新端末でゲームを起動しないよう注意してください。</font></li>
    </ol>
    <h2>2.旧端末の準備</h2>
    <ol>
      <li>ゲームを起動します。</li>
      <li>友達招待コードを取得、メモしておきます（「友達」→「サービス」→「招待コード」）。</li>
      <li>現時点でのレベル、職業、名前などをメモしておきます（確認用）。</li>
      <li>ゲームを終了します。<br>
        <font color='red'>※この時点の進行データがSSサーバに保管され，そこから新端末へ複製されます。</font></li>
    </ol>
    <h2>3.進行データの複製</h2>
    <ol>
      <li>旧端末招待コード: <input id="old_code" type="text" name="old_code">（またはユーザID）<br>
        <table>
          <tr>
            <td valign="top"><input type="button" value="アカウント情報確認" onClick="verify_user('old')"></td>
            <td>
              <table border=1 cellpadding="5">
                <tr>
                  <th>ユーザID</th>  
                  <th>名前</th>  
                  <th>職業</th>  
                  <th>レベル</th>
                  <th>経験値</th>
                  <th>完了クエスト数</th>
                  <th>デバイス(?)</th>
                </tr>
                <tr>
                  <td align="center"><span id="old_uid"><br></span></td>
                  <td align="center"><span id="old_nam"><br></span></td>
                  <td align="center"><span id="old_job"><br></span></td>
                  <td align="center"><span id="old_lvl"><br></span></td>
                  <td align="center"><span id="old_exp"><br></span></td>
                  <td align="center"><span id="old_qst"><br></span></td>
                  <td align="center"><span id="old_dev"><br></span></td>
                </tr>
              </table>
              ※デバイス種別は不正確な可能性があります。あくまで参考レベルで。
            </td>
          </tr>
        </table>
      </li>
      <li>新端末招待コード: <input id="new_code" type="text" name="new_code">（またはユーザID）<br>
        <table>
          <tr>
            <td valign="top"><input type="button" value="アカウント情報確認" onClick="verify_user('new')"></td>
            <td>
              <table border=1 cellpadding="5">
                <tr>
                  <th>ユーザID</th>  
                  <th>名前</th>  
                  <th>職業</th>  
                  <th>レベル</th>
                  <th>経験値</th>
                  <th>完了クエスト数</th>
                  <th>デバイス(?)</th>
                </tr>
                <tr>
                  <td align="center"><span id="new_uid"><br></span></td>
                  <td align="center"><span id="new_nam"><br></span></td>
                  <td align="center"><span id="new_job"><br></span></td>
                  <td align="center"><span id="new_lvl"><br></span></td>
                  <td align="center"><span id="new_exp"><br></span></td>
                  <td align="center"><span id="new_qst"><br></span></td>
                  <td align="center"><span id="new_dev"><br></span></td>
                </tr>
              </table>
              ※デバイス種別は不正確な可能性があります。あくまで参考レベルで。
            </td>
          </tr>
        </table>
      </li>
      <li>旧端末、新端末のアカウント情報が正しければ→ <input type="button" value="進行データ複製" id="clone" onClick="clone_data()"><br>
        <span id="clone_status">&nbsp;</span>
      </li>
    </ol>
    <h2>4.複製の確認</h2>
    <ol>
      <li>新端末でゲームを起動します</li>
      <li>「新しいセッションが始まりましたが、以前にこのデバイスで当ゲームをプレイしたことがあるようです。
        以前の経過を取り戻して**レベルから続けますか?」
        というメッセージが表示されて旧端末と同じ状態からゲームを続行できれば成功です。＼(＾o＾)／ オメデトウ</li>
    </ol>
 
    <hr>
    <h2><a name='initgame'>ゲーム進行データの削除</a></h2>
    <p>このサイトを使用して進行データを複製するには、新端末の進行データを削除する必要があります。
      ゲーム本体をアンインストール・再インストールしてもよいのですが、
      インストールするたびにゲーム本体をダウンロードするのに非常に時間がかかります。
    <p>以下に、デバイスの種類別にゲーム本体をアンインストールせずに進行データのみを削除する方法を説明します。
    <h3>Android</h3>
    バージョンなどによって若干違いがありますが、おおむね以下の手順で削除できます。
    <ol>
      <li>「設定」（または「システム設定」など）アイコンをタップ
      <li>「アプリ」（または「アプリ管理」など）をタップ
      <li>「The Secret Society」をタップ
      <li>ページの中ほどにある「データを消去」をタップ
      <li>確認メッセージが表示されるので「OK」（または「はい」など）をタップ
    </ol>
    <h3>iOS (iPhone、 iPad、 iPod)</h3>
    <ul>
      <li>iOSそのものにはアプリのデータのみを削除する機能はないようです。
        ネットで調べて見ると、サードパーティのデータ削除用アプリを使う、iCloud経由で削除するなどの方法があるようですが、
        現時点ではゲーム本体をアンインストール・再インストールするのが（時間はかかりますが）一番簡単で確実です。
    </ul>
    <h3>Mac</h3>
    <ul>
      <li>以下のフォルダにある player.prf (および player_backup.prf、 player_backup2.prf などがあればそれも）ファイルを削除します。
        <pre>/users/[ユーザ名]/Library/Containers/com.g5e.secretsociety.mac/Data/Library/Containers/com.g5e.secretsociety.mac/Mytona/Social Hog/</pre>
        ※末尾の "Social Hog" は "Social(スペース)Hog" です。
    </ul>
    <h3>Windows</h3>
    <ul>
      <li>以下のフォルダにある player.prf (および player_backup.prf、 player_backup2.prf などがあればそれも）を削除します。
        <pre>C:\Users\[ユーザ名]\AppData\Local\Packages\828B5831.TheSecretSociety-HiddenMystery_ytsefhwckbdv6\LocalState\</pre>
        ※ "<font color="red">828B5831</font>.TheSecretSociety-HiddenMystery_<font color="red">ytsefhwckbdv6</font>"の赤字部分は環境によって異なる場合があります。
    </ul>

    <script>
      var message = {
        'Merchant': '商人',
        'Sage': '賢者',
        'Sleuth': '密偵',
        'Magician': '魔術師',
        'Unknown': '不明',
        'code_error': 'コードエラー',
        'net_error': '通信エラー',
        'need_old': '旧端末情報を確認してください',
        'need_new': '新端末情報を確認してください',
        'complete': 'データ複製完了。新端末のアカウント情報が更新されました。',
        'prepare': '準備中',
        'request': '通信中',
        'timeout': 'タイムアウト'
      };
    </script>
    <script src='./CloneProfile.js'></script>
  </body>
</html>
